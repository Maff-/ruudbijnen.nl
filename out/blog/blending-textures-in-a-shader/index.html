<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>Blending Textures in an OpenGL Shader - ruudbijnen.nl</title>

	<meta name="generator" content="DocPad v6.59.6" />
	<meta name="keywords" content="Ruud Bijnen,Ruud,Bijnen,Creative,Developer,openFrameworks,OF,Cinder,LibCinder,Processing,VVVV,Web,Developer,Design,labbinaer,Studio Roosegaarde">
	
	<meta name="st:title" content="Blending Textures in an OpenGL Shader">
	<meta name="st:type" content="blog-post">
	<link  rel="stylesheet" href="/css/magnific-popup.css" /><link  rel="stylesheet" href="/css/highlight/monokai_sublime.css" /><link  rel="stylesheet" href="/css/highlight/pygments-monokai.css" />

	<!--[if lt IE 9]>
	<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.js"></script>
	<![endif]-->

	<link href="//fonts.googleapis.com/css?family=Quicksand:300,400,700" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="/css/boot.css" media="screen">
	

	<script>
	window.gaFired = false;
	window.fireGa = function() {
		if (window.gaFired) return;
		window.gaFired = true;

		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-19598839-1', 'www.ruudbijnen.nl');
		ga('send', 'pageview');
	}
</script>
</head>
<body>
<div id="wrapper" class="site">
	<header id="header">
		<div class="container">
			<!--<img id="logo-img" src="images/vector/logo-dark.svg">-->
			<a id="logo" href="/">
				<div id="logo-img">logo</div>
				<h1 id="logo-type">Ruud Bijnen</h1>
			</a>

			<h2 id="tagline"><em>Coding, Hacking, Designing, Making</em> <i>Web, Interaction, Electronics,
				Installations</i></h2>
		</div>
	</header>
	<!-- Main Menu -->

<nav id="nav-main" role="navigation">
	<div class="navbar navbar-default container">
		<button type="button" class="navbar-toggle" data-toggle="class"
				data-target="#nav-main-items .navbar-nav" data-value="collapsed">
		  <span class="sr-only">Toggle navigation</span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		</button>
		<div id="nav-main-items">
			<ul class="nav navbar-nav">
				
					
					<li class="nav-item-home"><a href="/">Home</a></li>
				
					
					<li class="nav-item-blog active"><a href="/blog">Blog</a></li>
				
					
					<li class="nav-item-projects"><a href="/projects">Projects</a></li>
				
					
					<li class="nav-item-about"><a href="/about">About</a></li>
				
				
			</ul>
			<ul class="nav navbar-nav navbar-right">
				<li id="search-nav-item"><a href="#search" id="search-nav-link">Search</a></li>
			</ul>
		</div>
	</div>
</nav>
	<!-- Swiftype Search -->
<section id="search" class="light collapse">
	<div class="container">
		<header>
			<h1>Search the Site</h1>
		</header>
	</div>
	<div id="search-form" class="container">
		<form novalidate autocomplete="off" role="search">
			<div class="form-group">
				<label for="search-input" class="sr-only">Search:</label>
				<input type="search" id="search-input" placeholder="Search for ..." class="form-control"/>
			</div>
		</form>
	</div>
	<div id="search-results" class="container"></div>
</section>

	<!-- Content -->
  <div class="site-content">
	<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="container">
		<header>
			<h1 itemprop="name">Blending Textures in an OpenGL Shader</h1>
			<small class="blog-post-meta meta">
				<dl>
					<dt>Posted:</dt><dd itemprop="datePublished"><time datetime="2010-09-15T12:13:47+02:00">September 15 2010</time></dd>
					<dt>Tags:</dt><dd itemprop="keywords">openFrameworks, opengl, glsl, shaders, ofxshader, ofxcontrolpanel</dd>
				</dl>
			</small>
		</header>
		
		<div class="alert alert-danger">
			<strong>Hold on there!</strong>
			This blog article is taken from my previous website and quite old.
			It may be not as interesting or relevant as it used to be, a lot of information may be deprecated.
		</div>
		
		<section class="blog-content" itemprop="articleBody">
			<p>For my assignment I wanted to get more familiar with the use of OpenGL shaders and the used language (GLSL). I started by searching the <a href="http://www.openframeworks.cc/forum/">openFrameworks forums</a>, and found that the <a href="http://www.lighthouse3d.com/opengl/glsl/">GLSL tutorial</a> over at Lighthouse3D was much appreciated. Also the <a href="http://www.openframeworks.cc/forum/viewtopic.php?f=9&amp;t=2729">ofxShader examples</a> topic is a must read, but you need to do some puzzling in order to get things working with the latest version of OF.</p>
<p>Going trough different tutorials on the web isn't as easy as you might think, OpenGL has been around for quite some time, and has evolved over the years, rendering some tutorials seriously out of date. An other difficulty I found is there are different ways to achieve the same goal, without it being clear if something is depreciated, or bad practice. Using openFrameworks is great, it takes a lot of the hard work away, but this has the downside that it's user may not know what's happening behind the scenes, which in my case has caused a lot of trouble and confusion when trying out these shader techniques. (Luckily you can browse the source and learn a lot from that, but still it can be a head scratcher some times).</p>
<p>After getting the examples running from the above mentioned forum thread I tried to create a simple program and shader from scratch, I left the FBO (Frame Buffer Object) out of it to simplify things.  The program would allow you to change the brightness and contrast of a load image by using a (fragment) shader.</p>
<p><a title="shaderTest02b by Ruud Bijnen, on Flickr" href="http://www.flickr.com/photos/ruudbijnen/4992917760/"><img src="http://farm5.static.flickr.com/4146/4992917760_a379294994.jpg" alt="shaderTest02b" width="500" height="253" /></a></p>
<p>Downloads: <a href="http://lab.ruudbijnen.nl/~ruud/BlogContent/shaderTest02b-src.zip">source code</a> (code::blocks), <a href="http://lab.ruudbijnen.nl/~ruud/BlogContent/shaderTest02b-bin.zip">binaries</a> (win32)</p>
<p>For this program and the next one I've used the most up to date version of ofxShader that I could find. It's located at <a href="http://code.google.com/p/kyle/">Kyle McDonald's Google Code page</a>: <a href="http://code.google.com/p/kyle/source/browse/trunk/openframeworks/addons/ofxShader/">http://code.google.com/p/kyle/source/browse/trunk/openframeworks/addons/ofxShader/</a> (At the time of this writing the latest version is from revision 81, Aug 08, 2010).</p>
<p>This version is a bit different from the one used in the examples by Theo Watson, mainly being the following:
[cpp light="true"]// loading the shader, usually done in app::setup()
ofxShader::loadShader() -&gt; ofxShader::setup()
// enabling the shader, usually done in app::draw()
ofxShader::setShaderActive(true) -&gt; ofxShader::begin()
// setting an uniform, to set a shader parameter, usually done in app::draw()
ofxShader::setUniformVariable*type*() -&gt; ofxShader::setUniform(*type*)
// disabling the shader, usually done in app::draw()
ofxShader::setShaderActive(false) -&gt; ofxShader::end()[/cpp]
This version by <a href="http://kylemcdonald.net/">Kyle McDonald</a> also includes an easy way (ofxShader::setTexture()) to bind an image or texture to the shader. This gets me to my second program.</p>
<p>In <a href="http://www.openframeworks.cc/forum/viewtopic.php?f=8&amp;t=3400&amp;hilit=blend">this topic</a> someone suggests to use a GLSL shader to blend textures like done in Adobe Photoshop. Romain Dura has created a glsl file containing a lot of blend modes used in Photoshop which you can find in <a href="http://blog.mouaif.org/?p=94">his blog post</a>, I tried to combine theses thing together. After quite some struggling (see rant at the start of this post) I've managed  to get things working which I turned into a app.</p>
<p>This was also a nice opportunity to try out the <a href="http://github.com/ofTheo/ofxControlPanel/">ofxControlPanel</a> GUI add-on by <a href="http://www.theowatson.com/">Theo Watson</a>, which is a nice alternative for <a href="http://www.memo.tv/">Memo</a>'s <a href="http://github.com/memo/msalibs/tree/master/ofxSimpleGuiToo/">ofxSimpleGuiToo</a>.</p>
<p><a title="ShaderTextureBlendingGui by Ruud Bijnen, on Flickr" href="http://www.flickr.com/photos/ruudbijnen/4992392971/"><img src="http://farm5.static.flickr.com/4083/4992392971_93f1a19ca5_z.jpg" alt="ShaderTextureBlendingGui" width="580" height="480" /></a>
<a title="ShaderTextureBlendingResult by Ruud Bijnen, on Flickr" href="http://www.flickr.com/photos/ruudbijnen/4992397497/"></a></p>
<p>In the control panel you can set a (different) Base or Blend image by double-clicking on a file listed in the appropriate file lister just below the preview. In the right column of the control panel you find sliders and a dropdown list that will allow you to change the shader parameters. The contrast and brightness is applied after blending the Base and Blend image. The Blend Mix parameter allows you to dim the effect of the blending where a 0.0 value represents the original Base image and 1.0 value the blended Base + Blend image.</p>
<p>The result of above settings is displayed here below.</p>
<p>Downloads: <a href="http://lab.ruudbijnen.nl/~ruud/BlogContent/ShaderTextureBlending-src.zip">source code</a> (code::blocks), <a href="http://lab.ruudbijnen.nl/~ruud/BlogContent/ShaderTextureBlending-bin.zip">binaries</a> (win32)</p>
<p><a title="ShaderTextureBlendingResult by Ruud Bijnen, on Flickr" href="http://www.flickr.com/photos/ruudbijnen/4992397497/"><img src="http://farm5.static.flickr.com/4092/4992397497_14dbdb4695_z.jpg" alt="ShaderTextureBlendingResult" width="512" height="512" /></a></p>
<p>[miniflickr photoset_id="72157624960878548"]</p>
		</section>
	</div>

	

	<nav class="nav-article">
		<div class="container">
			<div class="navlinks">
  <a href="/blog/textures-and-opengl-blending/" title="Previous Post: Textures and OpenGL blending modes" class="navlinks-prev">&laquo; Textures and OpenGL blending modes</a>
  <a href="/blog/les-memoires/" title="Next Post: Les Mémoires – Memories of past time" class="navlinks-next">Les Mémoires – Memories of past time &raquo;</a>
</div>
		</div>
	</nav>
</article>

<aside class="related">
	<div class="container">
		<header>
			<h3>Related documents</h3>
		</header>
		<ul class="related-documents list-documents">
			
				<li class="list-documents-item blog-post">
					<span class="badge document-type">blog-post</span>
					<a href="/blog/bend-it-good/" class="full-article">Bend it Good!</a>
					<span class="tags">
						
						Bend it Good, <em>openFrameworks</em>, Written Images, Cairo
					</span>
				</li>
			
				<li class="list-documents-item blog-post">
					<span class="badge document-type">blog-post</span>
					<a href="/blog/bezier-shape-editor-animator/" class="full-article">Bézier Shape Editor/Animator</a>
					<span class="tags">
						
						<em>openFrameworks</em>, bezier, xml
					</span>
				</li>
			
				<li class="list-documents-item blog-post">
					<span class="badge document-type">blog-post</span>
					<a href="/blog/bouncy-balls-with-momentum/" class="full-article">Bouncy Balls with Momentum</a>
					<span class="tags">
						
						<em>openFrameworks</em>, collision-detection
					</span>
				</li>
			
				<li class="list-documents-item blog-post">
					<span class="badge document-type">blog-post</span>
					<a href="/blog/inverse-kinematics-using-the-ofxvectormath-addon/" class="full-article">Inverse Kinematics using the ofxVectorMath addon</a>
					<span class="tags">
						
						<em>openFrameworks</em>
					</span>
				</li>
			
				<li class="list-documents-item blog-post">
					<span class="badge document-type">blog-post</span>
					<a href="/blog/les-memoires/" class="full-article">Les Mémoires – Memories of past time</a>
					<span class="tags">
						
						Les Mémoires, <em>openFrameworks</em>, Write-Up
					</span>
				</li>
			
				<li class="list-documents-item blog-post">
					<span class="badge document-type">blog-post</span>
					<a href="/blog/particle-engines-revisited/" class="full-article">Particle Engines Revisited</a>
					<span class="tags">
						
						<em>openFrameworks</em>, cinder
					</span>
				</li>
			
				<li class="list-documents-item blog-post">
					<span class="badge document-type">blog-post</span>
					<a href="/blog/textures-and-opengl-blending/" class="full-article">Textures and OpenGL blending modes</a>
					<span class="tags">
						
						<em>openFrameworks</em>, cinder, particles
					</span>
				</li>
			
				<li class="list-documents-item project">
					<span class="badge document-type">project</span>
					<a href="/projects/bend-it-good/" class="full-article">Bend It Good!</a>
					<span class="tags">
						
						Bend it Good, <em>openFrameworks</em>, Print, Written Images
					</span>
				</li>
			
				<li class="list-documents-item project">
					<span class="badge document-type">project</span>
					<a href="/projects/les-memoires/" class="full-article">Les Mémoires</a>
					<span class="tags">
						
						Les Mémoires, <em>openFrameworks</em>, Installation
					</span>
				</li>
			
		</ul>
	</div>
</aside>

  </div>

	<!-- Footer -->
<footer id="footer">
	<div class="container">
		<div class="row">
			<nav id="site-meta" class="site-meta">
				<header>
					<h4>Site Links</h4>
				</header>
				<ul>
					<li><a href="/about#contact" class="contact" title="Contact me">Contact</a></li>
					<li><a href="#" class="disabled rss" title="RSS feed">RSS feed</a></li>
					<li><a href="#" class="disabled site-map" title="Site Map">Site Map</a></li>
					<li><a href="https://github.com/Maff-/ruudbijnen.nl" class="disabled source" title="Source Code @ GitHub">Source Code</a></li>
				</ul>
			</nav>
			<nav id="profiles" class="profiles">
				<header>
					<h4>Online Profiles</h4>
				</header>
				<ul>
					<li><a href="https://github.com/Maff-" class="github" title="GitHub">GitHub</a></li>
					<li><a href="https://www.linkedin.com/in/ruudbijnen" class="linkedin" title="LinkedIn">LinkedIn</a></li>
					<li><a href="https://twitter.com/ruudbijnen" class="twitter" title="Twitter">Twitter</a></li>
					<!--<li><a href="https://www.facebook.com/ruudbijnen" class="facebook" title="Facebook">Facebook</a></li>-->
					<li><a href="https://www.flickr.com/photos/ruudbijnen" class="flickr" title="Flickr">Flickr</a></li>
					<li><a href="https://vimeo.com/ruudbijnen" class="vimeo" title="Vimeo">Vimeo</a></li>
				</ul>
			</nav>
		</div>
		<div class="row">
			<section id="copyright">
				<small>© 2014 Ruud Bijnen</small>
			</section>
			<nav class="nav-top">
				<a href="#top" rel="top">Back to Top</a>
			</nav>

		</div>
	</div>
</footer>
</div>

<script defer="defer"  src="/js/vendor/jquery.min.js"></script><script defer="defer"  src="/js/vendor/bootstrap.min.js"></script><script defer="defer"  src="/js/search.js"></script><script defer="defer"  src="/js/toggle-class.js"></script><script defer="defer"  src="/js/vendor/jquery.magnific-popup.min.js"></script><script defer="defer"  src="/js/app.js"></script>

<script>
	if (window.cookieOkay || document.cookie.indexOf('cookieOkay=1') >= 0) {
		if (typeof window.fireGa == 'function') window.fireGa();
	}
</script>

</body>
</html>